[{"C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\index.js":"1","C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\reportWebVitals.js":"2","C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\App.js":"3","C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\pages\\UserPage.js":"4","C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\components\\CardHeader.js":"5","C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\components\\Card.js":"6","C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\components\\Pagination.js":"7","C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\components\\SideFilters.js":"8"},{"size":506,"mtime":1610312081049,"results":"9","hashOfConfig":"10"},{"size":362,"mtime":1606142540521,"results":"11","hashOfConfig":"10"},{"size":276,"mtime":1610523663806,"results":"12","hashOfConfig":"10"},{"size":6005,"mtime":1610523694686,"results":"13","hashOfConfig":"10"},{"size":1648,"mtime":1610523643052,"results":"14","hashOfConfig":"10"},{"size":2660,"mtime":1610523925751,"results":"15","hashOfConfig":"10"},{"size":1365,"mtime":1610488272393,"results":"16","hashOfConfig":"10"},{"size":1383,"mtime":1610524388805,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"1k7c6yt",{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"20"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\index.js",[],["36","37"],"C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\reportWebVitals.js",[],"C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\App.js",[],"C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\pages\\UserPage.js",["38"],"import React, { useEffect, useState } from \"react\";\r\nimport Card from \"../components/Card\";\r\nimport CardHeader from \"../components/CardHeader\";\r\nimport Pagination from \"../components/Pagination\";\r\nimport SideFilters from \"../components/SideFilters\";\r\n\r\nfunction UserPage() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [noOfProfiles, setNoOfProfiles] = useState(null);\r\n  const [fetchedData, setFetchedData] = useState(null);\r\n  const [profiles, setProfiles] = useState([]);\r\n  const [pageSize] = useState(20);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [error, setError] = useState(null);\r\n  const [gender, setGender] = useState(null);\r\n  const [paymentMethod, setPaymentMethod] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      fetch(process.env.REACT_APP_API_KEY)\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          if (data) {\r\n            const { records } = data;\r\n            setNoOfProfiles(records.profiles.length);\r\n            setFetchedData(records.profiles);\r\n            const formatData = renderProfile(records.profiles, currentPage);\r\n            setProfiles(formatData);\r\n            setLoading(false);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          setError(\"Failed to fetch data. Try again\");\r\n        });\r\n    };\r\n\r\n    if (!fetchedData) {\r\n      fetchData();\r\n    }\r\n\r\n    if (gender || paymentMethod) {\r\n      const data = renderProfile(fetchedData, currentPage);\r\n      setProfiles(data);\r\n    }\r\n  }, [fetchedData, currentPage, gender, paymentMethod]);\r\n\r\n  const renderProfile = (\r\n    data,\r\n    pageNumber = null,\r\n    category = \"\",\r\n    filterOption = \"\",\r\n    searchInput = \"\"\r\n  ) => {\r\n    if (!searchInput || searchInput.trim().length === 0) {\r\n      searchInput = false;\r\n    }\r\n\r\n    let renderData = data;\r\n\r\n    // FILTER BY GENDER\r\n    if (gender) {\r\n      renderData = renderData.filter(\r\n        ({ Gender }) => Gender.toLowerCase() === gender\r\n      );\r\n      setNoOfProfiles(renderData.length);\r\n    }\r\n\r\n    // FILTER BY PAYMENT METHOD\r\n    if (paymentMethod) {\r\n      renderData = renderData.filter(\r\n        ({ PaymentMethod }) => PaymentMethod.toLowerCase() === paymentMethod\r\n      );\r\n      setNoOfProfiles(renderData.length);\r\n    }\r\n\r\n    // FILTER BY GENDER AND PAYMENT METHOD\r\n    if (gender && paymentMethod) {\r\n      renderData = renderData.filter(\r\n        ({ PaymentMethod, Gender }) =>\r\n          Gender.toLowerCase() === gender &&\r\n          PaymentMethod.toLowerCase() === paymentMethod\r\n      );\r\n      setNoOfProfiles(renderData.length);\r\n    }\r\n\r\n    // SEARCH BY NAME\r\n    if (category === \"searchByName\") {\r\n      renderData = renderData.filter(({ FirstName, LastName }) =>\r\n        searchInput\r\n          ? RegExp(`^${searchInput}`, \"ig\").test(\r\n              `${FirstName.toLowerCase()} ${LastName.toLowerCase()}`\r\n            ) ||\r\n            RegExp(`^${searchInput}`, \"ig\").test(\r\n              `${LastName.toLowerCase()} ${FirstName.toLowerCase()}`\r\n            )\r\n          : true\r\n      );\r\n      setNoOfProfiles(renderData.length);\r\n    }\r\n\r\n    // PAGINATION\r\n    if (pageNumber) {\r\n      console.log(pageNumber, currentPage);\r\n      const start = pageSize * (pageNumber - 1);\r\n      const end = start + pageSize;\r\n      renderData = renderData.slice(start, end);\r\n    }\r\n\r\n    const page = Math.ceil(renderData.length / 20);\r\n    if (page < 1) {\r\n      setCurrentPage(1);\r\n    }\r\n\r\n    return renderData.map((obj, index) => {\r\n      return (\r\n        <div key={index}>\r\n          <Card item={obj} />\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  const handleFilters = (category, filterOption) => {\r\n    if (category === \"gender\") {\r\n      setGender(filterOption);\r\n    }\r\n\r\n    if (category === \"paymentMethod\") {\r\n      setPaymentMethod(filterOption);\r\n    }\r\n  };\r\n\r\n  const handleSearch = (value) => {\r\n    const data = renderProfile(\r\n      fetchedData,\r\n      currentPage,\r\n      \"searchByName\",\r\n      \"\",\r\n      value.trim().toLowerCase()\r\n    );\r\n    setProfiles(data);\r\n  };\r\n\r\n  const handlePagination = (pageNumber) => {\r\n    console.log(\"page\", pageNumber);\r\n    if (pageNumber < 1) return;\r\n\r\n    const data = renderProfile(fetchedData, pageNumber);\r\n    setProfiles(data);\r\n    setCurrentPage(pageNumber);\r\n  };\r\n\r\n  if (loading || error) {\r\n    return (\r\n      <div className=\"d-flex justify-content-center align-items-center\">\r\n        {error ? <h1>{error}</h1> : <h1>Loading data....</h1>}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"d-flex justify-content-between flex-column align-items-center\">\r\n        <div className=\"user-page\">\r\n          <div className=\"w-100\">\r\n            <CardHeader\r\n              total={noOfProfiles}\r\n              activePage={currentPage}\r\n              handleSearch={handleSearch}\r\n            />\r\n          </div>\r\n          {profiles && profiles.length > 0 ? (\r\n            <div className=\"d-lg-flex justify-content-between flex-lg-row flex-sm-row\">\r\n              <div className=\"mr-2\">\r\n                <SideFilters data={fetchedData} handleFilters={handleFilters} />\r\n              </div>\r\n              <div className=\"flex-fill\">{profiles}</div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"d-flex justify-content-center align-items-enter mt-5\">\r\n              <div className=\"mr-2\">\r\n                <SideFilters data={fetchedData} handleFilters={handleFilters} />\r\n              </div>\r\n              <div className=\"flex-fill ml-5\">\r\n                <h1 className=\"text-white\">No record available</h1>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"\">\r\n          <br />\r\n          <Pagination\r\n            total={noOfProfiles}\r\n            currentPage={currentPage}\r\n            profilePerPage={20}\r\n            paginate={handlePagination}\r\n          />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UserPage;\r\n","C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\components\\CardHeader.js",[],"C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\components\\Card.js",[],"C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\components\\Pagination.js",[],"C:\\Users\\Raji Lateef\\Desktop\\Repo\\devcenter\\client\\src\\components\\SideFilters.js",[],{"ruleId":"39","replacedBy":"40"},{"ruleId":"41","replacedBy":"42"},{"ruleId":"43","severity":1,"message":"44","line":46,"column":6,"nodeType":"45","endLine":46,"endColumn":55,"suggestions":"46"},"no-native-reassign",["47"],"no-negated-in-lhs",["48"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'renderProfile'. Either include it or remove the dependency array.","ArrayExpression",["49"],"no-global-assign","no-unsafe-negation",{"desc":"50","fix":"51"},"Update the dependencies array to be: [fetchedData, currentPage, gender, paymentMethod, renderProfile]",{"range":"52","text":"53"},[1565,1614],"[fetchedData, currentPage, gender, paymentMethod, renderProfile]"]